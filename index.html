<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Vue - Boolflix</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js" charset="utf-8"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Raleway&family=Roboto+Condensed:ital,wght@1,300&display=swap" rel="stylesheet">
    </head>
    <body>

        <div class="container" id="root">

            <header class="header">

                <div class="logo">
                    <h1>Boolflix</h1>
                </div>

                <div class="searchbar">
                    <input v-model="title_searched" type="text" class="search-input" @keyup.enter="titleRequest()">
                    <div class="search-btn">
                        <span class="" @click="movieRequest()">Cerca</span>
                    </div>
                </div>

            </header>

            <h3 v-if="loading_movies">Ricerca film in corso...</h3>
            <h3 v-if="loading_tvshows">Ricerca serie tv in corso...</h3>

            <div class="results" v-if="movies.length > 0">
                <h3>Risultati della la ricerca: '{{title_searched_support}}'</h3>

                <h3 v-if="no_results_movies">Nessun film trovato...</h3>
                <h3 v-if="no_results_tvshows">Nessuna serie tv trovata...</h3>
            </div>



            <h2 v-if="movies.length > 0">Movies</h2>
            <div class="cards-container">
                <div class="card" v-for="(movie,index) in movies">

                    <!-- __________________COVER__________________ -->
                    <div class="card-cover">
                        <img :src="cover_starting_url + cover_size + movie.poster_path" alt="" v-if="movie.poster_path != null">
                        <img src="no_cover/no_cover.jpg" alt="" v-else>
                    </div>

                    <!-- __________________SHOWED_INFO__________________ -->
                    <div class="card-info">

                        <div class="italian-title">
                            <span class="span1">Titolo italiano: </span>
                            <span class="span2">{{movie.title}}</span>
                        </div>
                        <div class="original-title">
                            <span class="span1">Titolo originale: </span>
                            <span class="span2">{{movie.original_title}}</span>
                        </div>

                        <div class="language-flag">
                            <span class="span1">Lingua originale: </span>
                            <span class="span2" v-if="!known_languages.includes(movie.original_language)">{{movie.original_language}}</span>
                            <img v-else :src="getLanguageFlag(movie)" :alt="movie.original_language">
                        </div>

                        <div class="vote">
                            <span class="span1">Voto: </span>
                            <i v-if="getVote(movie)" class="fa-star" :class="i <= getVote(movie) ? 'fas' : 'far'" v-for="i in max_vote"></i>
                            <span class="span2" v-if="getVote(movie) == 0"><strong>N/A</strong></span>
                        </div>
                        <div class="overview">
                            <span class="span1">Trama: </span>
                            <span class="span2" v-if="movie.overview.length > 100">{{movie.overview.slice(0, 99)}}[...]</span>
                            <span v-if="movie.overview.length <= 100" class="span2">{{movie.overview}}</span>
                            <span class="span2" v-if="movie.overview == ''">Non disponibile</span>
                        </div>
                        <div class="info-btn" @click="showMoreInfo(index)">
                            <span>Visualizzza pi√π informazioni</span>
                        </div>

                    </div>

                    <!-- __________________HDDEN_ INFO__________________ -->
                    <div class="hidden-info" :class="hidden_info.clicked_flag ? 'active' : ''">

                        <div class="quit-info">
                            <i @click="showMoreInfo(index)" class="fas fa-undo-alt"></i>
                        </div>

                        <div class="hidden-cover">
                            <img :src="cover_starting_url + cover_size + movies[hidden_info.info_index].poster_path" alt="" v-if="movies[hidden_info.info_index].poster_path != null">
                            <img src="no_cover/no_cover.jpg" alt="" v-else>
                        </div>

                        <div class="italian-title">
                            <span class="span1">Titolo italiano: </span>
                            <span class="span2">{{movies[hidden_info.info_index].title}}</span>
                        </div>

                        <div class="original-title">
                            <span class="span1">Titolo originale: </span>
                            <span class="span2">{{movies[hidden_info.info_index].original_title}}</span>
                        </div>

                        <div class="vote">
                            <span class="span1">Voto: </span>
                                <i v-if="getVote(movies[hidden_info.info_index]) > 0" class="fa-star" :class="i <= getVote(movies[hidden_info.info_index]) ? 'fas' : 'far'" v-for="i in max_vote"></i>
                            <span class="span2" v-if="getVote(movies[hidden_info.info_index]) == 0"><strong>N/A</strong></span>
                        </div>

                        <div class="overview">
                            <span class="span1">Trama: </span>
                            <span class="span2" v-if="movies[hidden_info.info_index].overview == ''">Non disponibile</span>
                            <span class="span2" v-else>{{movies[hidden_info.info_index].overview}}</span>
                        </div>

                    </div>



                </div>
            </div>

            <!-- <h2 v-if="tvshows.length > 0">Serie TV</h2>
            <div class="cards-container">
                <div class="card" v-for="show in tvshows">

                    <div class="card-cover">
                        <img :src="cover_starting_url + cover_size + show.poster_path" alt="" v-if="show.poster_path != null">
                        <img src="no_cover/no_cover.jpg" alt="" v-else>
                    </div>

                    <div class="card-info">
                        <div class="italian-title">
                            <span>Titolo italiano: </span>
                            <h4>{{show.name}}</h4>
                        </div>
                        <div class="original-title">
                            <span>Titolo originale: </span>
                            <h4>{{show.original_name}}</h4>
                        </div>


                        <div class="language-flag">
                            <span>Lingua originale: </span>
                            <span v-if="!known_languages.includes(show.original_language)">{{show.original_language}}</span>
                            <img v-else :src="getLanguageFlag(show)" :alt="show.original_language">
                        </div>

                        <div class="vote">
                            <span>Voto: </span>
                            <i v-if="Math.round(show.vote_average / 2); > 0" class="fa-star" :class="i <= Math.round(show.vote_average / 2); ? 'fas' : 'far'" v-for="i in max_vote"></i>
                            <span v-if="Math.round(show.vote_average / 2); == 0"><strong>N/A</strong></span>
                        </div>
                    </div>
                    </div>
            </div> -->


        </div>

        <script src="main.js" charset="utf-8"></script>
    </body>
</html>
